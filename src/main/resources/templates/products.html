<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<title>Cart Wala</title>
<!-- Required meta tags -->
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description"
	content="FreshCart is a beautiful eCommerce HTML template specially designed for multipurpose shops & online stores selling products. Most Loved by Developers to build a store website easily." />
<meta content="Codescandy" name="author" />
<!-- Font Awesome CDN -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
	integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
	crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Favicon icon-->
<link rel="shortcut icon" type="image/x-icon" href="images2/favicon.ico" />

<!-- Libs CSS -->
<!-- Option 1: Include in HTML -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
<link th:href="@{/css/theme.min.css}" rel="stylesheet" />
<!-- Theme CSS -->
</head>

<body>





	<!-- section-->
	<div class="mt-4">
		<div class="container">
			<!-- row -->
			<div class="row">
				<!-- col -->
				<div class="col-12">
					<!-- breadcrumb -->
					<nav aria-label="breadcrumb navbar ">
						<ol class="breadcrumb mb-0 d-flex justify-content-between">
							<div class="d-flex">
								<li class="breadcrumb-item"><a href="/">Home</a></li>
								<li class="breadcrumb-item"><a href="/products">products</a>
								</li>
								<li class="breadcrumb-item active" aria-current="page">my
									products</li>
							</div>
							<div class="d-flex ">

								<div class="list-inline-item">

									<a href="/user/cart" class="text-muted position-relative">
										 <i
										class="fa-solid fa-shopping-cart fs-3 text-primary"></i>
									 <span
									 	th:text="${cartCount > 0 ? cartCount : '0'}"
										class="position-absolute top-0 start-100 translate-middle badge bg-warning ">
											 
									</span>
									</a>
								</div>





								<th:block th:if="${user == null}">
									<a href="/signin"
										class="fs-5 badge rounded-pill ms-2 bg-primary text-light">
										Login <i class="fa-solid fa-user"></i>
									</a>
								</th:block>


								<th:block th:unless="${user == null}">
									<div class="dropdown ms-3  d-lg-block">
										<button class="btn btn-primary p-1 " type="button"
											id="dropdownMenuButton1" data-bs-toggle="dropdown"
											aria-expanded="false">
											<span class=""> </span><i class="fa-solid fa-user"></i>
											[[${user.name}]]
										</button>
										<ul class="dropdown-menu"
											aria-labelledby="dropdownMenuButton1">
											<li><a class="dropdown-item" href="/user/profile">Profile</a></li>
											<li><a class="dropdown-item" href="/user/myorders">My
													Orders</a></li>

											<li><a class="dropdown-item" href="/settings">Settings</a></li>
											<li><hr class="dropdown-divider"></li>
											<li><a class="dropdown-item" href="/logout">Logout</a></li>
										</ul>
									</div>
								</th:block>

							</div>
						</ol>
					</nav>
				</div>
			</div>
		</div>
	</div>
	<!-- section -->
	<section class="mt-2 mb-lg-14 mb-8">
		<!-- container -->
		<div class="container">
			<!-- row -->
			<div class="row gx-10">
				<!-- col -->
				<div class="col-lg-3 col-md-4  mb-md-0">
					<div>
						<!-- title -->

						<!-- Sidebar Toggle Button -->
						<!-- Add the button that toggles the dropdown on small screens -->
						<button class="btn btn-primary d-md-none mb-3" type="button"
							data-bs-toggle="collapse" data-bs-target="#categoryList"
							aria-expanded="false" aria-controls="categoryList">
							Categories</button>

						<!-- Wrap the categories inside a collapse div -->
						<div class="collapse d-md-block" id="categoryList">
							<p  id="location" class="text-primary fs-4">Finding Location...</p>
							<div class="py-4">
								<!-- title -->
								<h5 class="mb-3">Categories</h5>
								
								<!-- Sidebar Toggle Button -->
								<ul class="list-unstyled">
									<li class="dropdown-item mb-1 "><a
										href="/products?category="
										class="list-group-item list-group-item-action"
										th:classappend="${paramValue==''}?'active':''">All</a></li>

									<li th:each="cat: ${category}"><a
										class="dropdown-item mb-1 "
										th:classappend="${paramValue == cat.name} ? 'active ' : ''"
										th:href="@{'/products?category='+${cat.name}}"> <img
											th:src="@{'/uploads/img/category_img/'+${cat.imagename}}"
											height="45px" width="45px" alt="" srcset="" />&nbsp;
											[[${cat.name}]]

									</a>
										<hr></li>


								</ul>
							</div>
						</div>
					</div>

					<!-- Banner Design -->
				</div>
				<div class="col-lg-9 col-md-8">
					<form action="/search-product" class="search-header m-4">
						<div class="input-group">
							<input type="text" class="form-control border-end-0" name="st"
								placeholder="Search for products.."
								aria-label="Search for products.."
								aria-describedby="basic-addon2" />
							<button class="input-group-text btn btn-primary">
								<i class="bi bi-search text-light"></i>
							</button>
						</div>
					</form>
					<!-- card -->
					<div class="card mb-4 bg-light border-0">
						<!-- card body -->
						<div class="card-body p-5">
							<h1 class="mb-0"
								th:text="${paramValue != null and paramValue.length() > 0 ? paramValue : 'Browse our Products'}"></h1>


						</div>
					</div>

					<!-- list icon -->
					<div class="d-md-flex justify-content-between align-items-center">
						<div>
							<p class="mb-3 mb-md-0">
								<span class="text-dark">[[${productsSize}]]</span> Products
								found
							</p>
						</div>
						<!-- icon -->
						<div class="d-flex justify-content-between align-items-center">
							<a href="product_filter.html" class="text-muted me-3"><i
								class="bi bi-list-ul"></i></a> <a href="cart_list.html"
								class="me-3 active"><i class="bi bi-grid"></i></a> <a href="#"
								class="me-3 text-muted"><i class="bi bi-grid-3x3-gap"></i></a>
							<div class="me-2">
								<!-- select option -->
								<select class="form-select " aria-label="Default select example">
									<option selected>Show: 50</option>

									<option value="10">10</option>
									<option value="20">20</option>
									<option value="30">30</option>

								</select>

							</div>
							<div>
								<!-- select option -->
								<select class="form-select" aria-label="Default select example">
									<option selected>Sort by: Featured</option>
									<option value="Low to High">Price: Low to High</option>
									<option value="High to Low">Price: High to Low</option>
									<option value="Release Date">Release Date</option>
									<option value="Avg. Rating">Avg. Rating</option>
								</select>
							</div>
						</div>
					</div>
					<!-- row -->
					<div
						class="row g-3 row-cols-xl-4 row-cols-lg-3 row-cols-2 row-cols-md-2 mt-2">
						<!-- col -->


						<div class="col" th:each="prod: ${products}">
							<!-- card -->
							<div class="card card-product h-100 shadow"
								style="min-height: 350px; max-height: 450px;">
								<div class="card-body d-flex flex-column">
									<!-- badge -->
									<div class="text-center position-relative">
										<div class="position-absolute top-0 start-0">
											<span class="badge bg-warning">[[${prod.discount}]]%</span>
										</div>
										<a href="#!"> <!-- img --> <img
											th:src="@{'/uploads/img/product_img/'+${prod.imageName}}"
											alt="Product Image" class=" img-fluid"
											style="object-fit: contain; width: 100%; height: 200px;" />
										</a>
										<!-- action btn -->
										<div class="card-product-action">
											<a class="btn-action"> <i class="bi bi-eye"
												data-bs-toggle="tooltip" data-bs-html="true"
												title="Quick View"></i>
											</a> <a class="btn-action" data-bs-toggle="tooltip"
												data-bs-html="true" title="Wishlist"> <i
												class="bi bi-heart"></i>
											</a> <a href="#!" class="btn-action" data-bs-toggle="tooltip"
												data-bs-html="true" title="Compare"> <i
												class="bi bi-arrow-left-right"></i>
											</a>
										</div>
									</div>
									<!-- heading -->
									<div class="text-small mb-1 mt-auto">
										<a href="#!" class="text-decoration-none text-muted"><small>[[${prod.category}]]</small></a>
									</div>
									<h2 class="fs-6">
										<a href="#!" class="text-inherit text-decoration-none">[[${prod.title}]]</a>
									</h2>
									<div class="text-muted small">
										<span class="text-primary" id="prodDesc">[[${prod.description}]]</span>
									</div>
									<!-- price -->
									<div
										class="d-flex justify-content-between align-items-center mt-3">
										<div>
											<span class="text-primary fs-5">&#8377;
												[[${prod.discountedPrice}]]</span> <span
												class="text-decoration-line-through text-muted">&#8377;
												[[${prod.price}]]</span>
										</div>
										<!-- btn -->
										<div>
											<a th:href="@{'/product/'+${prod.id}}"
												class="btn btn-primary btn-sm"> <i
												class="fa-solid fa-cart-shopping"></i> Add
											</a>
										</div>
									</div>
								</div>
							</div>
						</div>


					</div>
					<div class="row mt-8">
						<div class="col">
							<section class="pagination_component p-4">
								<nav>
									<ul class="pagination justify-content-center">

										<!-- Link for the "Previous" button when it's NOT the first page -->
										<li class="page-item" th:if="${!isFirst}"><a
											class="page-link mx-1 rounded-3"
											th:href="@{'/products?pageNo=' + ${pageNo - 1}}"
											aria-label="Previous"> <i class="fa-solid fa-arrow-left"></i>
										</a></li>

										<!-- Disabled "Previous" button when it's the first page -->
										<li class="page-item disabled" th:if="${isFirst}"><a
											class="page-link mx-1 rounded-3" href="#"
											aria-label="Previous"> <i class="fa-solid fa-arrow-left"></i>
										</a></li>

										<!-- Page numbers -->
										<li class="page-item"
											th:each="i : ${#numbers.sequence(1, totalPages)}"><a
											class="page-link mx-1 rounded-3"
											th:classappend="${pageNo + 1 == i} ? 'active' : ''"
											th:href="@{'/products?pageNo=' + ${i - 1}}">[[${i}]] </a></li>

										<!-- Ellipsis for skipped pages -->
										<li class="page-item" th:if="${totalPages > 12}"><a
											class="page-link mx-1 rounded-3 text-body" href="#">...</a></li>

										<!-- Link for the "Next" button when it's NOT the last page -->
										<li class="page-item" th:if="${!isLast}"><a
											class="page-link mx-1 rounded-3"
											th:href="@{'/products?pageNo=' + ${pageNo + 1}}"
											aria-label="Next"> <i class="fa-solid fa-arrow-right"></i>
										</a></li>

										<!-- Disabled "Next" button when it's the last page -->
										<li class="page-item disabled" th:if="${isLast}"><a
											class="page-link mx-1 rounded-3" href="#" aria-label="Next">
												<i class="fa-solid fa-arrow-right"></i>
										</a></li>

									</ul>
								</nav>
							</section>


						</div>
					</div>
				</div>
			</div>
		</div>
	</section>




	<!-- Javascript-->
	<!-- Own JS Link -->
	<script type="text/javascript" src="/js/location.js"></script>
	<script type="text/javascript" th:src="@{js/jquery.min.js}"></script>
	<script type="text/javascript" th:src="@{js/bootstrap.bundle.min.js}"></script>
	<script type="text/javascript" th:src="@{js/theme.min.js}"></script>

	<!-- choose one -->
</body>
</html>
